/*! uu_appg01, 2.1.0, 2017-08-03 12:33:24Z */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("module")):"function"==typeof define&&define.amd?define("UuApp",["module"],t):"object"==typeof exports?exports.UuApp=t(require("module")):e.UuApp=t(e.undefined)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(23),i=((r?r.uri:(document.currentScript||Array.prototype.slice.call(document.getElementsByTagName("script"),-1)[0]||{}).src)||"").toString();n.p=i.split(/\//).slice(0,-1).join("/")+"/",e.exports=n(25)},function(e,t){"use strict";function n(e){var t=this;if(!(t instanceof n))return new(n.bind.apply(n,arguments));var o=e;o&&"object"==("undefined"==typeof o?"undefined":i(o))||(o={message:arguments[0],cause:arguments[1]}),Object.assign(this,o),this.id||(this.id=r()),this.stack||(this.stack=(new Error).stack)}function r(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)});return e}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};try{"{}"==JSON.stringify(new Error)&&(Error.prototype.toJSON=function(){if(Object.hasOwnProperty(this,"toJSON"))return this;this.toJSON=function(){return this};var e="{}"==JSON.stringify(this);return delete this.toJSON,e?this.toString()+(null!=this.stack?"\n"+this.stack:""):this})}catch(e){}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,e.exports=n},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.Perflog=t.Util=t.Logging=t.Error=t.Uri=t.AppClient=void 0,n(37);var i=n(31),o=r(i),u=n(14),s=r(u),a=n(8),c=r(a),l=n(11),f=r(l),p=n(15),d=r(p),h=n(12),m=r(h);t.AppClient=o,t.Uri=s,t.Error=c,t.Logging=f,t.Util=d,t.Perflog=m},function(e,t,n){"use strict";function r(e){this._env={},e!==!1&&i.apply(this,arguments)}function i(e){if(this.initInvoked)throw new s("UuApp.Util.Config can be initialized only once (#init method). If a private / separate environment is needed, use new UuApp.Util.Config().");this.initInvoked=!0;var t;if("string"==typeof e)this.initUrl=arguments[0],t=o.apply(this,arguments);else if(null!=e&&"function"==typeof e.then)t={promise:Promise.resolve(e)};else{if(null!=e&&"object"!=("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e)throw new s("UuApp.Util.Config can be initialized only with object-like structure, but typeof says '"+("undefined"==typeof e?"undefined":u(e))+"'. Initialized with: "+JSON.stringify(e));t={immediateResult:e}}return t.immediateResult?(this._env=t.immediateResult,this.initComplete=!0,this.initPromise=Promise.resolve(this)):this.initPromise=t.promise.then(function(e){return this._env=e,this.initComplete=!0,this}.bind(this)),this.initPromise}function o(e,t){var n,r=new Promise(function(r,i){if(!e)return r({});var o=t||{},u=new XMLHttpRequest;u.open("GET",e,o.sync!==!0),u.setRequestHeader("Accept","application/json"),u.onerror=function(t){return i(new s("Unable to load environment configuration from "+e+" - network error."))},u.onload=function(t){if(u.status>=200&&u.status<300)try{return n=(u.responseText?JSON.parse(u.responseText):null)||{},void r(n||{})}catch(t){i(new s("Unable to load environment configuration from "+e+" - not a JSON. Response:\n"+u.responseText))}else i(new s("Unable to load environment configuration from "+e+" - status "+u.status+". Response:\n"+u.responseText))},u.send(null)});return{immediateResult:n,promise:r}}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(1);r.prototype.initInvoked=!1,r.prototype.initComplete=!1,r.prototype.initPromise=null,r.prototype.initUrl=null,r.prototype.get=function(e,t){if(0==arguments.length)return this._env;if(t===!1)return this._env[e];for(var n=e.split(/\./);n.length>1;){var r=this._env[n.join(".")];if(null!=r)return r;n.splice(n.length-2,1)}return this._env[n[0]]};var a=new r(!1);r.init=function(e){return i.apply(a,Array.prototype.slice.call(arguments)),f(),a.initPromise.then(c,l),a.initPromise},Object.defineProperties(r,{initInvoked:{get:function(){return a.initInvoked}},initComplete:{get:function(){return a.initComplete}},initPromise:{get:function(){return a.initPromise}},initUrl:{get:function(){return a.initUrl}}});var c,l;r.initCompletePromise=new Promise(function(e,t){return c=e,l=t});var f,p;r.initInvokedPromise=new Promise(function(e,t){return f=e,p=t}),r.get=function(){return a.get.apply(a,arguments)};var d=!1;if("undefined"!=typeof window){if("undefined"!=typeof System&&window&&System&&System.has&&System.get&&System.normalizeSync)try{var h=System.normalizeSync("UU_ENVIRONMENT");if(System.has(h)){var m=System.get(h);r.init(m.default||m),h.match(/\/UU_ENVIRONMENT$/)||(a.initUrl=h),d=!0}else h.match(/\/UU_ENVIRONMENT$/)||(r.init(System.import("UU_ENVIRONMENT")),a.initUrl=h,d=!0)}catch(e){console.error("Failed to initialize configuration from UU_ENVIRONMENT. Error:",e)}!d&&window.UU5&&window.UU5.Environment&&(r.init(window.UU5.Environment),d=!0)}e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(21),o=r(i),u=n(7),s=r(u),a={};t.default={getMetadata:function(e){var t=e.replace(/\/+$/,""),n=a[t];if(n)return n;var r=t+"/.well-known/openid-configuration";return a[t]=s.default.wrapForImmediateThen(o.default.get(r).catch(function(e){throw delete a[t],e}))}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(u.Error.Error);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),o=r(i),u=function(e){var t=Object.assign({},e),n={iframe:null};Object.defineProperty(n,"loginWindow",{get:function(){try{return null!=n.iframe?n.iframe.contentWindow:null}catch(e){}return null}}),o.default.registerForCallback(this,n),this.finalize=function(e){this.destroy(),t.onResult&&t.onResult(e)}.bind(this),this.render=function(){n.iframe||(n.iframe=document.createElement("iframe"),n.iframe.style.cssText="position: absolute;top: -300px; left: -300px; width: 200px; height: 200px; opacity: 0;",n.iframe.src=t.url,document.body.appendChild(n.iframe))},this.destroy=function(){n.iframe&&n.iframe.parentNode&&n.iframe.parentNode.removeChild(n.iframe),this.destroy=function(){},o.default.unregisterForCallback(this)}};t.default=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={wrapForImmediateThen:function(e){return e.then(function(t){return e._immediateValue=t},function(t){return e._immediateError=t}),e},immediateThen:function(e,t,n){if("_immediateValue"in e)return"function"==typeof t?t(e._immediateValue):e._immediateValue;if("_immediateError"in e){if("function"==typeof n)return n(e._immediateError);throw e._immediateError}return e.then(t,n)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TimeoutError=t.RemoteError=t.NetworkError=t.AbortError=t.Error=void 0;var i=n(1),o=r(i),u=n(32),s=r(u),a=n(33),c=r(a),l=n(34),f=r(l),p=n(35),d=r(p);t.Error=o.default,t.AbortError=s.default,t.NetworkError=c.default,t.RemoteError=f.default,t.TimeoutError=d.default},function(e,t,n){"use strict";function r(e){var t=this;if(!a.allowLoggerNew)throw new Error("Use UuApp.Logging.LoggerFactory.get(name) to get an instance of Logger.");this.name=e;var n=!1;this._buffer=[],Object.defineProperty(this,"ready",{get:function(){return n&&(!s.initInvoked||s.initComplete)},set:function(e){n=e,n&&u.call(t)}})}function i(e){var t=this.name+": "+e.message;r.console[l[e.level].toLowerCase()].apply(r.console,[t].concat(e.args))}function o(e,t){this._buffer.push({method:e,args:t})}function u(){var e=this,t=this._buffer;this._buffer=[],t.forEach(function(t){return e[t.method].apply(e,t.args)})}var s=n(3),a=r.priv={},c={DEBUG:100,INFO:200,WARN:300,ERROR:400,OFF:Math.MAX_VALUE},l=Object.keys(c).reduce(function(e,t){return e[c[t]]=t,e},{});Object.keys(c).forEach(function(e){r["LEVEL_"+e.toUpperCase()]=c[e]}),r.prototype.setLevel=function(e){null==e&&(e=r.LEVEL_WARN);var t="string"==typeof e?c[e.toUpperCase()]:Number(e);"number"!=typeof t||isNaN(t)||(this.level=t)},r.prototype.getLevel=function(){return this.level},r.prototype.getLevelName=function(){return l[this.level]},r.prototype.level=c.WARN,r.prototype.debug=function(){return this.ready?void(this.level<=c.DEBUG&&i.call(this,{level:c.DEBUG,message:null!=arguments[0]?arguments[0]+"":"",args:Array.prototype.slice.call(arguments,1)})):o.call(this,"debug",Array.prototype.slice.call(arguments))},r.prototype.isDebugLoggable=function(){return!this.ready||this.level<=c.DEBUG},r.prototype.info=function(){return this.ready?void(this.level<=c.INFO&&i.call(this,{level:c.INFO,message:null!=arguments[0]?arguments[0]+"":"",args:Array.prototype.slice.call(arguments,1)})):o.call(this,"info",Array.prototype.slice.call(arguments))},r.prototype.isInfoLoggable=function(){return!this.ready||this.level<=c.INFO},r.prototype.warn=function(){return this.ready?void(this.level<=c.WARN&&i.call(this,{level:c.WARN,message:null!=arguments[0]?arguments[0]+"":"",args:Array.prototype.slice.call(arguments,1)})):o.call(this,"warn",Array.prototype.slice.call(arguments))},r.prototype.isWarnLoggable=function(){return!this.ready||this.level<=c.WARN},r.prototype.error=function(){return this.ready?void(this.level<=c.ERROR&&i.call(this,{level:c.ERROR,message:null!=arguments[0]?arguments[0]+"":"",args:Array.prototype.slice.call(arguments,1)})):o.call(this,"error",Array.prototype.slice.call(arguments))},r.prototype.isErrorLoggable=function(){return!this.ready||this.level<=c.ERROR},r.console=console,e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r=n.get(e.name+".logLevel",t!==!1);e.setLevel(r),e.ready=!0}var i=n(9),o=n(3),u={},s={},a=i.priv;s.get=function(e,t){if("string"!=typeof e)throw new Error("LoggerFactory.get() must be called with a string argument (logger name).");if(u[e])return u[e].logger;a.allowLoggerNew=!0;var n;try{n=new i(e),o.initInvoked&&!o.initComplete||r(n,t,o)}finally{a.allowLoggerNew=!1}return(u[e]={logger:n,hierarchical:t}).logger},i.getRootLogger=function(){return c},a.allowLoggerNew=!0,u[""]={logger:new i(""),hierarchical:!1};var c=u[""].logger;a.allowLoggerNew=!1,o.initComplete||(o.initInvokedPromise.then(function(){for(var e in u)u[e].logger.ready=!1}),o.initCompletePromise.then(function(e){for(var t in u)r(u[t].logger,u[t].hierarchical,e)})),e.exports=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerFactory=t.Logger=void 0;var i=n(9),o=r(i),u=n(10),s=r(u);t.Logger=o.default,t.LoggerFactory=s.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PerfLog=void 0;var i=n(36),o=r(i);t.PerfLog=o.default},function(e,t,n){"use strict";function r(e,t,n,r,s,a,c,l,f,p,d){function h(e){return function(){throw new i("Cannot set "+e+" on Uri because instances of Uri are immutable. Use UriBuilder instead.")}}function m(){if(void 0!==k)return k;if(null==O.gateway||null==O.product||null==O.workspace)throw new i("Insufficient URI - at least one of gateway, product and workspace is not set. Uri: "+O.toString());return k=O.Builder.parse(O).set({useCase:null}).clearParameters().toUri()}function v(){return void 0!==S?S:S=O.Builder.parse(O).set({gateway:null}).toUri()}var y=this;if(!o.allowNew)throw new i("Use UuApp.Uri.Uri.parse to obtain an instance of uuUri.");n&&"number"!=typeof n&&(n=parseInt(n+"",10)),null!=n&&""!==n||!e||(n=e.match(/^https$/)?443:80);var g={value:u,lazyGet:function(){return g.value!==u?g.value:g.value=y.Builder.formatGateway(e,t,n)}},w={value:u,lazyGet:function(){return w.value!==u?w.value:w.value=y.Builder.formatProduct(r,s,a,c)}},b={value:u,lazyGet:function(){return b.value!==u?b.value:b.value=y.Builder.formatWorkspace(l,f)}},_=Object.assign({},d),O=this;Object.defineProperties(this,{scheme:{get:function(){return e},set:h("scheme")},hostname:{get:function(){return t},set:h("hostname")},port:{get:function(){return n},set:h("port")},gateway:{get:g.lazyGet,set:h("gateway")},vendor:{get:function(){return r},set:h("vendor")},app:{get:function(){return s},set:h("app")},subApp:{get:function(){return a},set:h("subApp")},spp:{get:function(){return c},set:h("spp")},product:{get:w.lazyGet,set:h("product")},tid:{get:function(){return l},set:h("tid")},awid:{get:function(){return f},set:h("awid")},workspace:{get:b.lazyGet,set:h("workspace")},useCase:{get:function(){return p},set:h("useCase")},parameters:{get:function(){return Object.assign({},_)},set:h("parameters")},baseUri:{get:m,set:h("baseUri")},relativeUri:{get:v,set:h("relativeUri")}});var k,S,j;this.toString=function(){return void 0!==j?j:j=y.Builder.format(y)},this.toJSON=this.toString,Object.freeze(this)}var i=n(1),o=r.priv={},u={};r.prototype.join=function(){if(arguments.length<=0)return this;for(var e=this.gateway||"",t=this.toString().substr(e.length),n=0;n<arguments.length;++n){var i=arguments[n];i&&(t=t.replace(/[?#].*/,""),i=i.replace(/((^|\/)\.\.?)$/,"$1/"),"/"==i.charAt(0)?t=i:i.match(/^\+(\/|$)/)?t=t.replace(/\/?$/,"/")+i:"/"==t.charAt(t.length-1)?t+=i:t=t.replace(/(^|\/)[^\/]*$/,"$1")+i)}var o=[];t.split("/").forEach(function(e){".."===e?o.pop():"."!==e&&"+"!==e&&o.push(e)}),""!==o[0]&&o.unshift("");var u=o.join("/");return r.parse(e+u)},r.prototype.equals=function(e){return this.toString()===(e||"").toString()},r.parse=function(e){return e instanceof r?e:r.prototype.Builder.parse(e).toUri()},e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UriBuilder=t.Uri=void 0;var i=n(13),o=r(i),u=n(38),s=r(u);t.Uri=o.default,t.UriBuilder=s.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var i=n(3),o=r(i);t.Config=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=document.createElement("a");return t.href=e,t.href.toString()}function u(){if(!(L.currentSession.isAuthenticated()||L.currentSession._loginInProgress.length>0)){var e;return location.search.replace(/[?&]access_token=([^&#]*)/,function(t,n){e=decodeURIComponent(n.replace(/\+/g," "))}),e?L.currentSession._login({access_token:e,nonce:null}):L.currentSession._login({prompt:"none",acr_values:"1"}).catch(function(e){if(!(e&&"object"==("undefined"==typeof e?"undefined":s(e))&&"string"==typeof e.error_description&&e.error_description.match(/interaction/i)&&e.error_description.match(/required/i)))throw e})}}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(2),l=n(40),f=r(l),p=n(17),d=r(p),h=n(41),m=r(h),v=n(49),y=r(v),g=n(44),w=r(g),b=n(5),_=r(b),O=n(43),k=r(O),S=n(4),j=r(S),P=n(50),E=r(P),U=n(48),x=r(U),C=n(7),R=r(C),A=n(22),T=r(A),I=n(6),N=r(I),M=c.Error.Error,L=function(){function e(t){var n=this;if(i(this,e),!t)throw new M("Session must be initialized with proper options or UuApp.Util.Config.");this._optionsMergedPromise=R.default.wrapForImmediateThen(Promise.resolve(t&&"function"==typeof t.get?t.initPromise:t).then(function(e){if(e&&"function"==typeof e.get?(n.serverUri=e.get("uuoidc.serverUri",!1),n.clientId=e.get("uuoidc.clientId",!1),n.implicitFlowRedirectUri=e.get("uuoidc.redirectUri",!1),n.sessionCheckInterval=e.get("uuoidc.sessionCheckInterval",!1)):e&&(n.serverUri=e.serverUri,n.clientId=e.clientId,n.implicitFlowRedirectUri=e.redirectUri,n.sessionCheckInterval=e["uuoidc.sessionCheckInterval"]),null==n.serverUri&&(n.serverUri=f.default.serverUri),null==n.clientId&&(n.clientId="uu-oidc:unregistered-client:"+(0,y.default)()),null==n.sessionCheckInterval&&(n.sessionCheckInterval=f.default.sessionCheckInterval),n.implicitFlowRedirectUri||(n.implicitFlowRedirectUri="callbacks/oidc-callback.html"),!n.implicitFlowRedirectUri.match(/^[a-z]+:/i)){var t=o(document.baseURI||location.pathname).replace(/^([^?#]*\/).*/,"$1");"/"!=n.implicitFlowRedirectUri.charAt(0)?n.implicitFlowRedirectUri=o(t+n.implicitFlowRedirectUri):n.implicitFlowRedirectUri=o(n.implicitFlowRedirectUri)}var r=1e3*Math.max(5,n.sessionCheckInterval),i=function(){var e=this;return this._loginCtx?void this._login({acr_values:"1",prompt:"none"},!1).then(function(){setTimeout(i,r)},function(t){delete e._loginCtx,e._runListeners(),setTimeout(i,r)}):setTimeout(i,r)}.bind(n);setTimeout(i,r)})),this._loginInProgress=[];var r=[];this.isAuthenticated=function(){return!!n._loginCtx},this.addIdentityChangeListener=function(e){return r.push(e),n.removeIdentityChangeListener.bind(n,e)},this.removeIdentityChangeListener=function(e){var t=r.indexOf(e);return t!=-1&&r.splice(t,1),t!=-1},this._runListeners=function(){var e=n.getIdentity();r.forEach(function(t){return t.call(n,e)})},this.nonce=Math.random().toString(32).substr(2),this.addIdentityChangeListener(function(e){n._sessionRefreshTimeout&&(clearTimeout(n._sessionRefreshTimeout),delete n._sessionRefreshTimeout);var t=n.getClaims(),r=(t||{}).exp;if(r){r*=1e3;var i=3e5,o=(new Date).getTime(),u=r-o-i;u<0&&(u=0),n._sessionRefreshTimeout=setTimeout(function(){delete n._sessionRefreshTimeout,n._login({prompt:"none",acr_values:"1"}).catch(function(e){if(!n._sessionRefreshTimeout){var t=Math.max(0,r-(new Date).getTime()-3e4);n._sessionRefreshTimeout=setTimeout(function(){delete n._loginCtx,n._runListeners()},t)}})},u)}})}return a(e,[{key:"getIdentity",value:function(){return this._loginCtx?this._loginCtx.getIdentity():null}},{key:"getClaims",value:function(){return this._loginCtx?this._loginCtx.getClaims():null}},{key:"login",value:function(e){var t;return e&&(t=Object.keys(e).reduce(function(t,n){return t[T.default.toSnakeCase(n)]=e[n],t},{})),this._login(t,!0)}},{key:"_login",value:function(t){var n,r=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=Object.assign({},t);"urn:ietf:params:oauth:token-type:jwt-uuos8"===o.token_type_hint&&(n=o.access_token,delete o.access_token,delete o.token_type_hint);var u=o.access_token;delete o.access_token;var s=function(){if(r._loginInProgress.push(1),0==Object.keys(o).length&&(o.acr_values=1),!u&&r._loginCtx){var e=!0;(o.prompt||o.max_age||o.access_token)&&(e=!1);var t=(null!=o.acr_values?o.acr_values+"":"").split(/\s+/),s=r.getIdentity();if(t.every(function(e){return Number(e)>s.loginLevelOfAssurance})&&(e=!1),r._authResponseExpired(r._loginCtx.authResponse)&&(e=!1),e)return r._loginInProgress.pop(),Promise.resolve(r)}var a,c=u?{id_token:u}:null,l=u||"nonce"in o?o.nonce:r.nonce,f=Promise.resolve(c||R.default.immediateThen(r._optionsMergedPromise,function(){if(n){l=null;var e=new E.default({serverUri:r.serverUri,clientId:r.clientId,redirectUri:r.implicitFlowRedirectUri});return e.grantExchangeToken({subject_token:n})}return o.nonce=l,o.state=a=Math.random().toString(32).substr(2),d.default.login({serverUri:r.serverUri,clientId:r.clientId,redirectUri:r.implicitFlowRedirectUri,loginParams:o})},function(e){return Promise.reject(e)}));return f.then(function(e){if(a&&e.state!==a)throw new M("Invalid 'state' in received token. Expected "+a+" but got "+e.state+". Token: "+JSON.stringify(e));if(r._authResponseExpired(e))throw new M("Token expired "+JSON.stringify(e));return r._validateIdToken(e.id_token,l).then(function(t){return i!==!1&&(r._loginCtx=new m.default(o,e,t),r._runListeners()),r})}).then(function(e){return r._loginInProgress.pop(),e},function(e){return r._loginInProgress.pop(),Promise.reject(e)})};return this!==e.currentSession||u||n||0!==Object.keys(o).length?s():R.default.immediateThen(e.initPromise,s)}},{key:"logout",value:function(){var e=this;return this._loginCtx?this._optionsMergedPromise.then(function(){return new Promise(function(t,n){var r=e.serverUri,i=e.implicitFlowRedirectUri,o=r+"/logout?redirect_uri="+encodeURIComponent(i);new N.default({url:o,onResult:function(n){delete e._loginCtx,e._runListeners(),t()}}).render()})}):Promise.resolve()}},{key:"getCallToken",value:function(e){var t=(this._loginCtx||{}).authResponse;if(!t)return null;var n={tokenType:t.token_type||null,token:t.id_token||null};return n}},{key:"_authResponseExpired",value:function(e){var t=(new Date).getTime()/1e3,n=60,r=!1;return e.issued_at||(e.issued_at=t),e.expires_at&&(r=r||e.expires_at<t-n),e.expires_in&&e.issued_at&&(r=r||Number(e.expires_in)+Number(e.issued_at)<t-n),r}},{key:"_validateIdToken",value:function(e,t){var n=this;return this._optionsMergedPromise.then(function(){return j.default.getMetadata(n.serverUri).then(function(r){var i={alg:["RS256"],iss:[r.issuer],gracePeriod:300};return w.default.decode(e,i,function(t){if(!t.alg||!t.alg.match(/^RS\d+$/))throw new M("Invalid token. Only RSA signature is supported, but token uses algorithm '"+t.alg+"'. Token: "+e);var i="RSA",o=r.id_token_signing_alg_values_supported||[];if(o.indexOf(t.alg)==-1)throw new M("Invalid token. Token was signed using algorithm '"+t.alg+"' but the OIDC server '"+n.serverUri+"' supports only "+JSON.stringify(o)+". Token: "+e);var u=new k.default({serverUri:n.serverUri});return u.getKey(t.kid,i).catch(function(t){throw new M("Invalid token. Unable to match key from JWT header to list of keys used by OpenID Connect server "+n.serverUri+". Token: "+e,t)})}).then(function(e){if(t&&e.nonce!==t)throw new _.default("Invalid nonce in ID token claims. Expected "+t+" but got "+e.nonce);return e})})})}}]),e}();t.default=L;var J,F=!0;Object.defineProperty(L,"currentSession",{get:function(){return F&&!J&&(J=new L(c.Util.Config),J.initComplete=!1,J.initPromise=L.initPromise),J},set:function(e){F=!1,J=e}});var W;L.initPromise=R.default.wrapForImmediateThen(new Promise(function(e,t){W=function(t,n){return L.initComplete=!0,L.currentSession.initComplete=!0,t||console.log("Session initialization failed:",n),e(L.currentSession),L.initPromise}})),L.initComplete=!1;var z=new Function("try {return this===window;}catch(e){ return false;}")();z?x.default.domReady.then(function(){return Promise.resolve(u())}).then(W.bind(null,!0),W.bind(null,!1)):W(!0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=r(i),u=n(7),s=r(u),a=n(47),c=r(a),l=n(6),f=r(l),p={login:function(e){var t=e||{},n=t.serverUri;if(!n)throw new Error("ImplicitFlow.login requires option 'serverUri'.");var r=t.clientId;if(!r)throw new Error("ImplicitFlow.login requires option 'clientId'.");var i=t.redirectUri;if(!i)throw new Error("ImplicitFlow.login requires option 'redirectUri'.");return s.default.immediateThen(o.default.getMetadata(n),function(e){var n=Object.assign({scope:"openid"},t.loginParams,{response_type:"id_token token",client_id:r,redirect_uri:i}),o=[];for(var u in n){var s=n[u];null!=s&&o.push(encodeURIComponent(u)+"="+encodeURIComponent(s+""))}var a=e.authorization_endpoint+"?"+o.join("&"),l=t.loginVisualComponent||("none"!=n.prompt?c.default:f.default);return new Promise(function(e,t){new l({url:a,onResult:function(n){var r=p.getAuthResponseFromCallback(n);return r===!1?t(new Error("User refused to sign in or the operation didn't complete successfully, e.g. due to popup blocking.")):void(r.error?t(r):e(r))}}).render()})},function(e){return Promise.reject(e)})},getAuthResponseFromCallback:function(e){if(e===!1)return e;var t={};return e.replace(/^[^#]*#?/,"").split(/&/).forEach(function(e){var n=e.indexOf("="),r=decodeURIComponent((n==-1?e.substr(0):e.substr(0,n)).replace(/\+/g," ")),i=decodeURIComponent((n==-1?"":e.substr(n+1)).replace(/\+/g," "));t[r]=i}),t}};t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SessionHandler=t.Session=void 0;var i=n(16),o=r(i),u=n(42),s=r(u);"undefined"!=typeof window&&(window.UuOidc={Session:o.default,SessionHandler:s.default}),t.Session=o.default,t.SessionHandler=s.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="uuOidcCallbackFn";"undefined"==typeof window||window[n]||(window[n]=function(e,t){for(var r=window[n].loginWindows,i=0;i<r.length;++i){var o=r[i];if(o.state.loginWindow==t)return void o.component.finalize(e)}console.warn("Received unexpected callback from window",t,"Passed result was:",e,"Ignoring the callback.")},window[n].loginWindows=[]),t.default={registerForCallback:function(e,t){window[n].loginWindows.push({component:e,state:t})},unregisterForCallback:function(e){for(var t=window[n].loginWindows,r=0;r<t.length;++r)if(t[r].component===e){t.splice(r,1);break}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={encodeAscii:function(e){return e?btoa(e).replace(/\+/g,"-").replace(/\//g,"_"):e},encode:function(e){return e?n.encodeAscii(unescape(encodeURIComponent(e))):e},decodeToAscii:function(e){if(!e)return null;var t=e.replace(/-/g,"+").replace(/_/g,"/");return atob(t)},decode:function(e){var t=n.decodeToAscii(e);return null!=t?decodeURIComponent(escape(t)):null}};t.default=n},function(e,t){"use strict";function n(e,t,n,r){return new Promise(function(i,o){var u=new XMLHttpRequest;u.open(e,t,!0),u.withCredentials=!0,u.setRequestHeader("Accept","application/json"),u.onreadystatechange=function(e){if(4==u.readyState)if(u.status>=200&&u.status<300)try{var t=JSON.parse(u.responseText);i(t)}catch(e){o(e)}else o(new Error("Server responded with status "+u.status))},u.withCredentials=!0,r&&r(u),u.send(n)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default={get:function(){return n.bind(this,"GET").apply(this,Array.prototype.slice.call(arguments))},post:function(){return n.bind(this,"POST").apply(this,Array.prototype.slice.call(arguments))}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={toSnakeCase:function(e){return(e||"").replace(/[A-Z]/g,function(e){return"_"+e.toLowerCase()})}}},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(){u.AppClient.Client.apply(this,arguments),this.defaults=i.defaults}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),u=r(o),s=n(18);i.prototype=Object.create(u.AppClient.Client.prototype),i.prototype.constructor=i;var a;i.get=function(){return a||(a=new i),a.get.apply(a,arguments)},i.post=function(e,t,n){return a||(a=new i),a.post.apply(a,arguments)};var c=function(){};c.prototype=u.AppClient.Client.defaults,i.defaults=new c;var l=[].concat(u.AppClient.Client.defaults.interceptors);l.splice(l.indexOf(u.AppClient.Client.UriHandler)+1,0,s.SessionHandler),i.defaults.interceptors=l,t.default=i},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(2),u=r(o),s=n(18),a=r(s),c=window.UuApp=window.UuApp||{};for(var l in u)c[l]=u[l];var f=window.UuOidc=window.UuOidc||{};for(var l in a)f[l]=a[l]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var i=n(2);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(24),u=r(o);t.Client=u.default},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}var i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,u,s=n(e),a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var c in r)i.call(r,c)&&(s[c]=r[c]);if(Object.getOwnPropertySymbols){u=Object.getOwnPropertySymbols(r);for(var l=0;l<u.length;l++)o.call(r,u[l])&&(s[u[l]]=r[u[l]])}}return s}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function u(){m&&d&&(m=!1,d.length?h=d.concat(h):v=-1,h.length&&s())}function s(){if(!m){var e=i(u);m=!0;for(var t=h.length;t;){for(d=h,h=[];++v<t;)d&&d[v].run();v=-1,t=h.length}d=null,m=!1,o(e)}}function a(e,t){this.fun=e,this.array=t}function c(){}var l,f,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,h=[],m=!1,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new a(e,t)),1!==h.length||m||i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){
throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){(function(t,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.0.5
	 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function o(e){K=e}function u(e){X=e}function s(){return function(){return t.nextTick(p)}}function a(){return"undefined"!=typeof G?function(){G(p)}:f()}function c(){var e=0,t=new Q(p),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=p,function(){return e.port2.postMessage(0)}}function f(){var e=setTimeout;return function(){return e(p,1)}}function p(){for(var e=0;e<H;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}H=0}function d(){try{var e=n(51);return G=e.runOnLoop||e.runOnContext,a()}catch(e){return f()}}function h(e,t){var n=arguments,r=this,i=new this.constructor(v);void 0===i[ie]&&N(i);var o=r._state;return o?!function(){var e=n[o-1];X(function(){return A(o,i,e,r._result)})}():U(r,i,e,t),i}function m(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(v);return S(n,e),n}function v(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(e){return ae.error=e,ae}}function b(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function _(e,t,n){X(function(e){var r=!1,i=b(n,t,function(n){r||(r=!0,t!==n?S(e,n):P(e,n))},function(t){r||(r=!0,E(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,E(e,i))},e)}function O(e,t){t._state===ue?P(e,t._result):t._state===se?E(e,t._result):U(t,void 0,function(t){return S(e,t)},function(t){return E(e,t)})}function k(e,t,n){t.constructor===e.constructor&&n===h&&t.constructor.resolve===m?O(e,t):n===ae?E(e,ae.error):void 0===n?P(e,t):i(n)?_(e,t,n):P(e,t)}function S(t,n){t===n?E(t,y()):e(n)?k(t,n,w(n)):P(t,n)}function j(e){e._onerror&&e._onerror(e._result),x(e)}function P(e,t){e._state===oe&&(e._result=t,e._state=ue,0!==e._subscribers.length&&X(x,e))}function E(e,t){e._state===oe&&(e._state=se,e._result=t,X(j,e))}function U(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ue]=n,i[o+se]=r,0===o&&e._state&&X(x,e)}function x(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,u=0;u<t.length;u+=3)r=t[u],i=t[u+n],r?A(n,r,i,o):i(o);e._subscribers.length=0}}function C(){this.error=null}function R(e,t){try{return e(t)}catch(e){return ce.error=e,ce}}function A(e,t,n,r){var o=i(n),u=void 0,s=void 0,a=void 0,c=void 0;if(o){if(u=R(n,r),u===ce?(c=!0,s=u.error,u=null):a=!0,t===u)return void E(t,g())}else u=r,a=!0;t._state!==oe||(o&&a?S(t,u):c?E(t,s):e===ue?P(t,u):e===se&&E(t,u))}function T(e,t){try{t(function(t){S(e,t)},function(t){E(e,t)})}catch(t){E(e,t)}}function I(){return le++}function N(e){e[ie]=le++,e._state=void 0,e._result=void 0,e._subscribers=[]}function M(e,t){this._instanceConstructor=e,this.promise=new e(v),this.promise[ie]||N(this.promise),B(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?P(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&P(this.promise,this._result))):E(this.promise,L())}function L(){return new Error("Array Methods must be provided an Array")}function J(e){return new M(this,e).promise}function F(e){var t=this;return new t(B(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function W(e){var t=this,n=new t(v);return E(n,e),n}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function $(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function D(e){this[ie]=I(),this._result=this._state=void 0,this._subscribers=[],v!==e&&("function"!=typeof e&&z(),this instanceof D?T(this,e):$())}function q(){var e=void 0;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=D}var V=void 0;V=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var B=V,H=0,G=void 0,K=void 0,X=function(e,t){ne[H]=e,ne[H+1]=t,H+=2,2===H&&(K?K(p):re())},Y="undefined"!=typeof window?window:void 0,Z=Y||{},Q=Z.MutationObserver||Z.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),re=void 0;re=ee?s():Q?c():te?l():void 0===Y?d():f();var ie=Math.random().toString(36).substring(16),oe=void 0,ue=1,se=2,ae=new C,ce=new C,le=0;return M.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===oe&&n<e;n++)this._eachEntry(t[n],n)},M.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===m){var i=w(e);if(i===h&&e._state!==oe)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===D){var o=new n(v);k(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},M.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===oe&&(this._remaining--,e===se?E(r,n):this._result[t]=n),0===this._remaining&&P(r,this._result)},M.prototype._willSettleAt=function(e,t){var n=this;U(e,void 0,function(e){return n._settledAt(ue,t,e)},function(e){return n._settledAt(se,t,e)})},D.all=J,D.race=F,D.resolve=m,D.reject=W,D._setScheduler=o,D._setAsap=u,D._asap=X,D.prototype={constructor:D,then:h,catch:function(e){return this.then(null,e)}},D.polyfill=q,D.Promise=D,D})}).call(t,n(28),function(){return this}())},function(e,t,n){"use strict";function r(e){this.options=e||{},this.options.headers=i(this.options.headers)}function i(e){if(!e||"object"!=("undefined"==typeof e?"undefined":f(e)))return null;var t={};for(var n in e)t[n.toLowerCase()]=e[n];return t}function o(e,t,n){function r(r){if(null==o){var u=i.product+".gatewayUri";o=r?r.get(u):null,null==o&&(o="https://uuappsg01.plus4u.net")}return o&&(e.uri=d.UriBuilder.parse(i).set({gateway:o}).toUri()),n(e,t)}var i=d.Uri.parse(e.uri);if(e.uri=i,i.gateway)return n(e,t);var o=t.gatewayUri;return null==o?Promise.resolve(h.Config.initPromise).then(r):r()}function u(e,t,n){function r(e,t){if(t.status>=400){var n=t.data;if(n&&"object"===("undefined"==typeof n?"undefined":f(n))&&"uuAppErrorMap"in n){var r=n.uuAppErrorMap,i=null;if(r)for(var o in r)if(r[o]&&"error"===r[o].type){i=o;break}i&&(t.error=new p.RemoteError(Object.assign({},r[i],{code:o})))}return Promise.reject(t)}return e?Promise.reject(t):t}return n(e,t).then(r.bind(null,!1),r.bind(null,!0))}function s(e,t,n){var r=d.Uri.parse(e.uri),i="_uujson"in r.parameters||t.uujson;if(i){if(/^(put|post)$/i.test(e.method)){if(!("object"==f(e.body)&&e.body&&"schema"in e.body&&"data"in e.body))throw new p.Error("DTO is not valid uuJSON - missing schema or data.");var o=""+r.product+r.useCase+"-in";if(e.body.schema!==o)throw new p.Error("DTO schema "+e.body.schema+" does not match expected "+o)}e.uri=d.UriBuilder.parse(r).setParameter("_uujson","").toUri()}return n(e,t)}function a(e,t,n){function i(e){return(e||"").replace(/[+;].*/,"").trim()}function o(e,n){if(t.transformResponse!==!1){var r=n.headers("content-type"),o=s[i(r)];try{o?n.data=o.deserialize(n.data):204===n.status&&(n.data=null)}catch(e){throw new p.Error("Error while deserializing response data.",e)}}return e?Promise.reject(n):n}var u=e.method.match(/^(put|post)$/i),s=r.contentTransformers||{},a=e.headers["content-type"];if(!("content-type"in e.headers))if(u){var c=null!=e.body&&(e.body instanceof FormData||e.body instanceof Blob||"object"==f(e.body)&&Object.keys(e.body).some(function(e){return e instanceof FormData||e instanceof Blob}));a=c?"multipart/form-data":"application/json; charset=utf-8",e.headers["content-type"]=a}else a="application/x-www-form-urlencoded";if("accept"in e.headers||(e.headers.accept="application/json"),t.transformParameters!==!1&&!u&&null!=e.body&&t.wrapQuery&&"application/x-www-form-urlencoded"==a&&(e.body={dto:JSON.stringify(e.body)}),t.transformParameters!==!1&&null!=e.body){var l=s[i(a)];try{l&&(e.body=l.serialize(e.body))}catch(e){throw new p.Error("Error while serializing data.",e)}}return n(e,t).then(o.bind(null,!1),o.bind(null,!0))}function c(e,t,n){var r;return v.PerfLog.measureSection("commandInvocation",function(i){return e.headers["x-request-id"]=i.id,r=n(e,t),r.then(function(t){return i.attributes.uri=e.uri,t},function(t){return i.attributes.uri=e.uri,Promise.reject(t)})}),r}function l(e,t,n){return Object.assign({status:e?e.status:0,headers:function(t){return t?e?e.getResponseHeader(t):null:e?e.getAllResponseHeaders():[]}},n)}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=n(8),d=n(14),h=n(15),m=n(11),v=n(12),y=m.LoggerFactory.get("UuApp.AppClient.Client");r.defaults={requestTimeout:300,interceptors:[o,u,s,a,c]},r.prototype.invoke=function(e,t,n,r){function o(e,t,n,r){if(v)return Promise.reject(l(null,n,{error:new p.AbortError("The Client call has been aborted.")}));var i=t.xhr=new XMLHttpRequest;return new Promise(function(r,o){var u,s=n.method.match(/^(put|post)$/i),a=n.uri.toString();s?u=n.body:n.body&&(a+=(a.indexOf("?")==-1?"?":"&")+n.body);var c=n.headers,f=t.requestTimeout=null!=t.requestTimeout?t.requestTimeout:e.constructor.defaults.requestTimeout;y.isDebugLoggable()?y.debug("Invoking Ajax request.",{method:n.method,url:a,body:u,requestTimeout:f,headers:c}):y.isInfoLoggable()&&y.info("Invoking Ajax request.",{method:n.method,url:a}),i.open(n.method,a,!0),f>0&&(i.timeout=1e3*f),i.withCredentials=!0;for(var d in c){var h=c[d];if(d&&null!=h){if("content-type"===d&&u instanceof FormData&&"multipart/form-data"===h)continue;i.setRequestHeader(d.replace(/(^|-)./g,function(e){return e.toUpperCase()}),h+"")}}i.ontimeout=function(e){y.info("Request timed out.",{url:a}),o(l(i,n,{error:new p.TimeoutError("Request timed out - "+a)}))},i.onload=function(e){y.isDebugLoggable()?y.debug("Received response.",{url:a,status:i.status,data:i.response}):y.info("Received response.",{url:a,status:i.status}),r(l(i,n,{data:i.response}))},i.onabort=function(e){y.info("Request has been aborted.",{url:a}),o(l(i,n,{error:new p.AbortError("Request has been aborted - "+a)}))},i.onerror=function(e){y.info("Request ended with network error.",{url:a}),o(l(i,n,{error:new p.NetworkError("Network error - "+a),data:i.response}))},i.send(u)})}var u=Object.assign({},this.options,r);delete u.requestTimeout,delete u.headers,delete u.interceptors;var s,a={method:(e||"post").toLowerCase(),uri:t,body:n,headers:Object.assign({},this.options.headers,i((r||{}).headers))},c={requestTimeout:null!=(r||{}).requestTimeout?(r||{}).requestTimeout:this.options.requestTimeout},d=this.options.interceptors||this.constructor.defaults.interceptors||[],h=d.reduceRight(function(e,t){return function(n,r){var i;try{i=t(n,r,e),i&&"object"==("undefined"==typeof i?"undefined":f(i))&&"function"==typeof i.then||(i=Promise.resolve(i))}catch(e){i=Promise.reject(e)}return i.then(function(e){var i=e;return e&&"status"in e||(y.warn("Client interceptor %s resolved the promise into a value that is not a Response object - auto-wrapping.",t.name),i=s||l(null,n,r),void 0!==e&&(i.data=e)),s=i,s.error&&y.warn("Client interceptor %s resolved response successfully but kept the error object set - unsetting. Error object:",t.name,s.error),s.error=null,i},function(e){return e&&"status"in e?s=e:(s||(s=l(null,n,r)),s.error=e instanceof p.Error?e:new p.Error("Client interceptor "+t.name+" ended with error.",e)),Promise.reject(s)})}},o.bind(null,this,c)),m=h(a,u),v=!1;return m.abort=function(){v=!0,c.xhr&&c.xhr.abort()},m},r.prototype.get=function(e,t,n){return this.invoke("get",e,t,n)},r.prototype.post=function(e,t,n){return this.invoke("post",e,t,n)};var g;r.get=function(){return g||(g=new r),g.get.apply(g,arguments)},r.post=function(){return g||(g=new r),g.post.apply(g,arguments)},r.UriHandler=o,r.RemoteErrorHandler=u,r.UujsonHandler=s,r.TransformParametersHandler=a;var w={serialize:function(e){return JSON.stringify(e)},deserialize:function(e){return e?JSON.parse(e):null}},b={serialize:function(e){if(null==e)return e;if("object"!=("undefined"==typeof e?"undefined":f(e)))return y.warn("Unrecognized value when serializing as application/x-www-form-urlencoded - passing as-is. Value:",{value:e}),e;var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},deserialize:function(e){if(null==e)return e;if("object"!=("undefined"==typeof e?"undefined":f(e)))return y.warn("Unrecognized value when deserializing as application/x-www-form-urlencoded - passing as-is. Value:",{value:e}),e;for(var t=e.replace(/\+/g," ").split("&"),n={},r=0;r<t.length;++r){var i=t[r];i.replace(/^([^=]*)=?(.*)$/,function(e,t,r){return n[decodeURIComponent(t)]=decodeURIComponent(r)})}return n}},_={serialize:function(e){if(!e)return e;if("object"!=("undefined"==typeof e?"undefined":f(e)))return y.warn("Unrecognized value when serializing as multipart/form-data - passing as-is. Value:",{value:e}),e;if(e instanceof FormData&&"function"!=typeof e.entries)return e;e instanceof Blob&&(e={file:e});var t={};if(e instanceof FormData){var n=!0,r=!1,i=void 0;try{for(var o,u=e.entries()[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var s=o.value;t[s[0]]=s[1]}}catch(e){r=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw i}}}else t=e;var a=[];for(var c in t)a.push({key:c,value:t[c],i:a.length});var l=a.length;a.sort(function(e,t){return(e.value instanceof File?e.i+l:e.i)-(t.value instanceof File?t.i+l:t.i)});var p=new FormData;return a.forEach(function(e){return p.append(e.key,e.value)}),p},deserialize:function(e){throw new p.Error("Deserializing multipart/form-data is not supported. Value: "+e)}};r.contentTransformers={"application/json":w,"application/x-www-form-urlencoded":b,"multipart/form-data":_},e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var i=n(30),o=r(i);t.Client=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){u.default.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),u=r(o);i.prototype=Object.create(u.default.prototype),i.prototype.constructor=i,t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){u.default.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),u=r(o);i.prototype=Object.create(u.default.prototype),i.prototype.constructor=i,t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){u.default.apply(this,arguments),delete this.stack}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),u=r(o);i.prototype=Object.create(u.default.prototype),i.prototype.constructor=i,t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){u.default.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),u=r(o);i.prototype=Object.create(u.default.prototype),i.prototype.constructor=i,t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){f||(f=o());var e=o();return f+"-"+f+"-"+e+"-0000"}function o(){for(var e=[],t=0;t<4;++t)e.push((65536*Math.random()|0).toString(16));return e.join("")}Object.defineProperty(t,"__esModule",{value:!0});var u=n(10),s=r(u),a=s.default.get("UuApp.Perflog.PerfLog",!1),c={measureSection:function(e){function t(){u.close()}var n,r=arguments[arguments.length-1],o=arguments.length>2?arguments[1]:null,u=new l(i(),e,o);try{n=Promise.resolve(r(u))}catch(e){n=Promise.reject(e)}return n.then(t,t)}},l=function(e,t,n){this.id=e,this.name=t,this.attributes=n||{},this.checkpoints={},this.start=Date.now()};l.prototype.setCheckpoint=function(e){this.checkpoints[e]=Date.now},l.prototype.close=function(){this.finish||(this.finish=Date.now(),this.duration=this.finish-this.start,a.info(JSON.stringify(this)))};var f;t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(29),o=r(i),u=n(27),s=r(u);if(o.default.polyfill(),Object.assign||(Object.assign=s.default),"undefined"!=typeof document&&!document.baseURI){var a=document.querySelector("base");a?document.baseURI=a.href:document.baseURI=location.href}},function(e,t,n){"use strict";function r(){var e=this,t=this;if(!(t instanceof r))return new(r.bind.apply(r,arguments));var n={parameters:{}};["scheme","hostname","vendor","app","subApp","spp","tid","awid","useCase"].forEach(function(t){var r=s["validate"+t.replace(/^./,function(e){return e.toUpperCase()})];Object.defineProperty(e,t,{get:function(){return n[t]},set:function(e){null!=e&&r(e),n[t]=null!=e?e:null}})}),Object.defineProperties(this,{port:{get:function(){return null!=n.port?Number(n.port):n.port},set:function(e){null!=e&&s.validatePort(e),n.port=null!=e?e:null}},gateway:{get:function(){return r.formatGateway(n.scheme,n.hostname,n.port)},set:function(e){var t=null!=e?s.parseGateway(e):null;n.scheme=t&&t.scheme||null,n.hostname=t&&t.hostname||null,n.port=t&&null!=t.port?t.port:null}},product:{get:function(){return r.formatProduct(n.vendor,n.app,n.subApp,n.spp)},set:function(e){var t=e?s.parseProduct(e):{};n.vendor=t.vendor||null,n.app=t.app||null,n.subApp=t.subApp||null,n.spp=t.spp||null}},workspace:{get:function(){return r.formatWorkspace(n.tid,n.awid)},set:function(e){var t=e?s.parseWorkspace(e):{};n.tid=t.tid||null,n.awid=t.awid||null}},parameters:{get:function(){return Object.assign({},n.parameters)},set:function(e){if(n.parameters={},e)for(var t in e)this.setParameter(t,e[t])}}}),this.setParameter=function(e,t){return s.validateParameterName(e),s.validateParameterValue(t),n.parameters[e]=t,this},this.deleteParameter=function(e){return s.validateParameterName(e),delete n.parameters[e],this},this.clearParameters=function(){return n.parameters={},this}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1),u=n(13),s=n(39);r.prototype.parse=function(e){var t="string"==typeof e?s.parse(e,r).toUri():e;return this.gateway=t.gateway,this.product=t.product,this.workspace=t.workspace,this.useCase=t.useCase,this.parameters=t.parameters,this},r.parse=function(e){return(new r).parse(e)},r.prototype.set=function(){for(var e=0;e<arguments.length;++e){var t=arguments[e];if(t&&"object"==("undefined"==typeof t?"undefined":i(t)))for(var n in t)this[n]=t[n]}return this},r.set=function(){var e=new r;return e.set.apply(e,arguments)},["scheme","hostname","port","gateway","vendor","app","subApp","spp","product","tid","awid","workspace","useCase","parameters"].forEach(function(e){var t="set"+e.replace(/^./,function(e){return e.toUpperCase()});r.prototype[t]=function(t){return this[e]=t,this},r[t]=function(e){return(new r)[t](e)}}),r.setParameter=function(e,t){return(new r).setParameter(e,t)},r.prototype.mergeParameters=function(e){if(e)for(var t in e)this.setParameter(t,e[t]);return this},r.prototype.join=function(){var e=this.toUri();return this.parse(e.join.apply(e,arguments))};var a=u.priv;r.prototype.toUri=function(){var e=[];if(null!=this.scheme||null==this.hostname&&null==this.port||e.push("scheme"),null!=this.hostname||null==this.scheme&&null==this.port||e.push("hostname"),null!=this.vendor||null==this.subApp&&null==this.spp||e.push("vendor"),null==this.app&&e.push("app"),null==this.subApp&&null!=this.spp&&e.push("subApp"),null==this.awid&&e.push("awid"),e.length)throw new o("Missing Uri parts: "+e.join(", ")+". Values: "+this.toString());a.allowNew=!0;try{return new u(this.scheme,this.hostname,this.port,this.vendor,this.app,this.subApp,this.spp,this.tid,this.awid,this.useCase,this.parameters)}finally{a.allowNew=!1}},r.prototype.toString=function(){return JSON.stringify({scheme:this.scheme,hostname:this.hostname,port:this.port,vendor:this.vendor,app:this.app,subApp:this.subApp,spp:this.spp,tid:this.tid,awid:this.awid,useCase:this.useCase,parameters:this.parameters})},r.prototype.format=function(){return r.format(this.toUri())},r.format=function(e){return s.format(e)},r.formatGateway=function(e,t,n){return s.formatGateway(e,t,n)},r.formatProduct=function(e,t,n,r){return s.formatProduct(e,t,n,r)},r.formatWorkspace=function(e,t){return s.formatWorkspace(e,t)},u.prototype.Builder=r,e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r;r="string"!=typeof n?'Value "'+t+'" of URI part ['+e+"] must be "+n+" but is typeof "+("undefined"==typeof t?"undefined":i(t)):'Value "'+t+'" of URI part ['+e+"] does not match regular expression /"+n.replace(/\//g,"\\/")+"/",o.call(this,r)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1),u="static|assets|public",s="[\\w\\.\\-~]",a="[a-zA-Z0-9_]",c="("+s+"+)",l="([0-9a-fA-F]{1,4})",f="(\\["+l+"(:("+l+")?){1,7}\\])",p="("+f+"|"+s+"+)",d="(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[0-5][0-9]{4}|[1-9][0-9]{0,3})",h="("+c+"://"+p+"(:"+d+")?)",m="("+a+"{1,32})",v="("+a+"{1,32})",y="("+a+"{1,32})",g="("+a+"{1,32})",w="(?=[^/]{1,131}(?:/|$))((?:"+m+"\\-)?"+v+"(?:\\-"+y+"(?:\\-"+g+")?)?)",b="("+a+"{1,32})",_="("+a+"{1,32})",O="(?=[^/\\?]{1,65}(?:/|\\?|$))((?:"+b+"\\-)?"+_+")",k="((?:/"+s+"*)*)",S="(?:"+s+"+)",j="(?:[^=&]*)",P="(?:"+S+"(?:="+j+")?)",E="("+P+"(?:&"+P+")*)",U=new RegExp("^(?:"+h+")?\\/"+w+"\\/"+O+k+"?(?:\\?"+E+"?)?$"),x={ASSET_CLASSIFIER:u,UNRESERVED:s,IDENTIFIER:a,SCHEME:c,IPV6_PART:l,IPV6:f,HOSTNAME:p,PORT:d,GATEWAY:h,VENDOR:m,APP:v,SUB_APP:y,SPP:g,PRODUCT:w,TID:b,AWID:_,WORKSPACE:O,USE_CASE:k,PARAMETER_NAME:S,PARAMETER_VALUE:j,PARAMETER:P,PARAMETERS:E,URI_REGEXP:U,parse:function(e,t){if(!t)throw new o("UriBuilder must be provided.");var n=(e||"").match(U);if(!n)throw new o("Parse error - invalid uri: "+(e||""));var r=(new t).set({scheme:n[2],hostname:n[3],port:n[10],vendor:n[12],app:n[13],subApp:n[14],spp:n[15],tid:n[17],awid:n[18],useCase:n[19]}),i=n[20];return i&&i.split("&").forEach(function(e){if(e){var t=e.indexOf("="),n=t!=-1?e.substr(0,t):e,i=t!=-1?e.substr(t+1):"";r.setParameter(n,decodeURIComponent(i))}}),r},format:function(e){var t=[];t.push((e.gateway||"")+"/"+(e.product||"")+"/"+(e.workspace||""));var n=e.useCase;n&&("/"!=n.charAt(0)&&t.push("/"),t.push(n)),t=[t.join("").replace(/\/+$/,"")];var r=e.parameters,i=Object.keys(r);i.sort();for(var o=0;o<i.length;++o){var u=i[o];t.push(o?"&":"?"),t.push(u);var s=r[u];null!=s&&""!==s&&(t.push("="),t.push(encodeURIComponent(s)))}return t.join("")},parseGateway:function(e){if("string"!=typeof e)throw new r("gateway",e,h);var t=e.match(new RegExp("^"+h+"$"));if(!t)throw new r("gateway",e,h);return{scheme:t[2],hostname:t[3],port:t[10]}},formatGateway:function(e,t,n){return e||t||n?(x.validateScheme(e),x.validateHostname(t),null!=n&&x.validatePort(n),e+"://"+t+(null!=n?":"+n:"")):null},parseProduct:function(e){if("string"!=typeof e)throw new r("product",e,w);var t=e.match(new RegExp("^"+w+"$"));if(!t)throw new r("product",e,w);return{vendor:t[2],app:t[3],subApp:t[4],spp:t[5]}},formatProduct:function(e,t,n,r){if(!(e||t||n||r))return null;e&&x.validateVendor(e),x.validateApp(t),n&&x.validateSubApp(n),r&&x.validateSpp(r);var i=[];return e&&i.push(e+"-"),i.push(t),n&&i.push("-"+n),r&&i.push("-"+r),i.join("")},parseWorkspace:function(e){if("string"!=typeof e)throw new r("workspace",e,O);var t=e.match(new RegExp("^"+O+"$"));if(!t)throw new r("workspace",e,O);return{tid:t[2],awid:t[3]}},formatWorkspace:function(e,t){if(!e&&!t)return null;e&&x.validateTid(e),x.validateAwid(t);var n=[];return e&&n.push(e+"-"),n.push(t),n.join("")},validateScheme:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+c+"$")))throw new r("scheme",e,c)},validateHostname:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+p+"$")))throw new r("hostname",e,p)},validatePort:function(e){if(e="number"==typeof e?e+"":e,"string"!=typeof e||!e.match(new RegExp("^"+d+"$")))throw new r("port",e,d)},validateGateway:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+h+"$")))throw new r("gateway",e,h)},validateVendor:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+m+"$")))throw new r("vendor",e,m)},validateApp:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+v+"$")))throw new r("app",e,v)},validateSubApp:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+y+"$")))throw new r("subApp",e,y)},validateSpp:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+g+"$")))throw new r("spp",e,g)},validateProduct:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+w+"$")))throw new r("product",e,w)},validateTid:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+b+"$")))throw new r("tid",e,b)},validateAwid:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+_+"$")))throw new r("awid",e,_)},validateWorkspace:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+O+"$")))throw new r("workspace",e,O)},validateUseCase:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+k+"$")))throw new r("useCase",e,k)},validateParameterName:function(e){if("string"!=typeof e||!e.match(new RegExp("^"+S+"$")))throw new r("parameterName",e,S)},validateParameterValue:function(e){if(null!=e&&"string"!=typeof e)throw new r("parameterValue",e,String)}};r.prototype=Object.create(o.prototype),r.prototype.constructor=r,e.exports=x},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={serverUri:"https://oidc.plus4u.net/uu-oidcg01-main/0-0",sessionCheckInterval:60}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,r,i){n(this,e),this.loginOptions=t,this.authResponse=r,this.claims=i,this.getClaims=function(){return i};var o;this.getIdentity=function(){return o?o:o={id:i.sub,name:i.name,email:i.email,uuIdentity:i.uu_identity,levelOfAssurance:Number(i.loa),loginLevelOfAssurance:Number(i.acr)}}};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n){function r(i){if(++c>5)throw new a.Error.AbortError("Command invocation stopped because user was not able to fulfill login requirements for the command within "+c+" attempts.");var l=Object.assign({},s,i);return(Object.keys(l).length>0?o._login(l,!0):Promise.resolve(o)).catch(function(e){if(e===!1)throw new a.Error.AbortError("Command invocation stopped because user refused to log in.");throw new a.Error.Error("Command invocation stopped because of a login error.",e)}).then(function(t){var n=t.isAuthenticated();if(n){var r=e.uri.baseUri;return Promise.resolve(t.getCallToken(r.toString())).then(function(e){return{isAuthenticated:n,callToken:e}})}return{isAuthenticated:n,callToken:null}}).then(function(i){var o=i.isAuthenticated,s=i.callToken,a=s?s.token:null;return a&&(e.headers.authorization=[s.tokenType||"Bearer",a].join(" ")),n(e,t).catch(function(e){var t=e.headers("www-authenticate");if(t){var n={};t.replace(/^\S+\s+/,"").split(/,/).map(function(e){return e.trim()}).forEach(function(e){var t=e.indexOf("="),r=u(t==-1?e:e.substr(0,t)),i=u(t==-1?"":e.substr(t+1));n[r]=u(i)});var i=Object.keys(n).filter(function(e){return e.match(/^(max_age|acr_values|prompt|scope)$/)}).reduce(function(e,t){return e[t]=n[t],e},{});if(Object.keys(i).length>0)return r(i);if(!o)return r({acr_values:"1"})}return Promise.reject(e)})})}var i="authorization"in e.headers;if(i)return n(e,t);var o=t.session||l.default.currentSession,s=t["uuoidc.loginParameters"];s&&(s=Object.keys(s).reduce(function(e,t){return e[p.default.toSnakeCase(t)]=s[t],e},{}));var c=0;return r(null)}function u(e){return decodeURIComponent(e.replace(/\+/g," "))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(2),a=i(s),c=n(16),l=r(c),f=n(22),p=r(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),s=r(u),a=n(21),c=r(a),l={},f=0,p=function(){function e(t){if(i(this,e),!t||!t.serverUri)throw new Error("Jwks must be initialized with options containing serverUri.");this.options=t}return o(e,[{key:"getKey",value:function(e,t){return this._getKey(e,t,!1)}},{key:"_getKey",value:function(e,t,n){var r=this;return s.default.getMetadata(this.options.serverUri).then(function(e){var t=l[e.jwks_uri];if(!t||n){var r=e.jwks_uri;n&&(r=r.replace(/(\?.*)?$/,function(e){return"?cachebust="+Date.now().toString(36)+"_"+(f++).toString(36)+(e?"&"+e.substr(1):"")})),t=l[e.jwks_uri]=c.default.get(r).then(function(e){return{jwkSet:e,url:r}})}return t}).then(function(i){var o=i.jwkSet,u=o.keys;if(e&&(u=u.filter(function(t){return t.kid===e})),t&&(u=u.filter(function(e){return e.kty===t})),1!=u.length){if(!n)return r._getKey(e,t,!0);throw new Error("There's "+u.length+" JSON Web Key(s) in JWK Set with kid='"+e+"' kty='"+t+"'. There must be exactly 1. JWK Set has been downloaded from: "+i.url)}return u[0]})}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),o=r(i),u=n(5),s=r(u),a=n(46),c=r(a),l=n(45),f=r(l),p="undefined"!=typeof crypto&&crypto.subtle&&crypto.subtle.importKey,d=p&&("undefined"==typeof location||"https:"==location.protocol),h=d?c.default:f.default,m="RS256";t.default={decode:function(e,t,n){var r,i;return Promise.resolve().then(function(){if("string"!=typeof e)throw new Error("Invalid JSON Web Token - it must be a string (result of JWS / JWE Compact Serialization as per RFC7515 / RFC7516).");if(r=e.split("."),3!=r.length)throw new Error("Unsupported JSON Web Token - the token doesn't consist of header+body+signature (only JWS Compact Serialization is supported - RFC7515, section-3). Token: "+e);var t=r[0],u=o.default.decode(t);if(i=JSON.parse(u),"JWT"!=i.typ)throw new Error("Invalid JSON Web Token - the header 'typ' field is not set to 'JWT'. Token: "+e);return n(i)}).then(function(n){if(!n||"RSA"!=n.kty)throw new Error("Unsupported key type. Only RSA keys are supported for JSON Web Token signature verification. Key: "+JSON.stringify(n));var o=n.alg||m;if(o!==i.alg)throw new s.default("Invalid JSON Web Token or wrong verification key - algorithms don't match. Token uses '"+i.alg+"', verification key uses '"+n.alg+"' (with default of '"+m+"'). Token: "+e+" Key: "+JSON.stringify(n));return h.verify(n,o,t,i,r,e);
}).then(function(t){if(!t)throw new s.default("Invalid JSON Web Token: "+e);var n=o.default.decode(r[1]),i=JSON.parse(n);return i})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(23),o=r(i),u=((o.default?o.default.uri:(document.currentScript||Array.prototype.slice.call(document.getElementsByTagName("script"),-1)[0]||{}).src)||"").toString(),s=void 0,a={verify:function(e,t,n,r,i,o){var c=this;return Promise.resolve().then(function(){if(void 0===s){var l,f=a.verify.bind(c,e,t,n,r,i,o),p=u.indexOf(".min.")!=-1,d=u.replace(/^(.*\/).*/,"$1"),h=d+"jsrsasign"+(p?".min":"")+".js";return l="undefined"!=typeof System?System.import(h):new Promise(function(e,t){var n=document.createElement("script");n.onload=function(){e(window.Jsrsasign)},n.onerror=function(e){t(e)},n.src=h,document.head.appendChild(n)}),l.then(function(e){return s=e||null,f()},function(e){return console.error(e),s=null,f()})}if(!s)throw new Error("Unable to verify token because jsrsasign library failed to load.");var m=s.KEYUTIL.getKey(e),v=s.jws.JWS.verifyJWT(o,m,n);return v||Promise.reject(new Error("Token is not valid. Token: "+o))})}};e.exports=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return new Uint8Array(e.split("").map(function(e){return e.charCodeAt(0)}))}function o(e){return null==e?null:Array.isArray(e)?e:[e]}function u(e){return new Date(1e3*e).toISOString().replace(/T/," ")}var s=n(20),a=r(s),c=n(5),l=r(c);e.exports={verify:function(e,t,n,r,s,c){var f={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-"+t.substr(2)}},p=JSON.parse(JSON.stringify(e));return delete p.use,crypto.subtle.importKey("jwk",p,f,!1,["verify"]).then(function(e){var t=s[2],n=s[0]+"."+s[1],r=i(a.default.decodeToAscii(t)),o=i(n);return crypto.subtle.verify(e.algorithm,e,r,o)},function(e){var t=new Error("Unable to verify JSON Web Token - importing key via WebCrypto API failed.\nKey: "+JSON.stringify(p)+"\nToken: "+c+"\nError: "+e);return t.cause=e,Promise.reject(t)}).then(function(e){if(!e)throw new l.default("Invalid JSON Web Token - signature is not valid. Token: "+c);var t=a.default.decode(s[1]),i=JSON.parse(t),f=function(e,t){throw new l.default("Invalid token: "+e+"\nFailed claim: "+JSON.stringify(t)+"\nIssued by: "+JSON.stringify(i.iss)+"\nVerification options: "+JSON.stringify(n)+"\nToken: "+c)};if(!n.alg)throw new Error("Unable to verify JWT claim - 'alg' field must be always given for verification.");n.alg.indexOf(r.alg)==-1&&f("Algorithm "+JSON.stringify(r.alg)+" used by token is not valid - expected one of "+JSON.stringify(n.alg)+".","alg");var p;p=o(n.iss),p&&p.indexOf(i.iss)===-1&&f("Issuer URI "+JSON.stringify(i.iss)+" in token is not valid - expected one of "+JSON.stringify(p)+". Token was issued by different OpenID Connect server or it was forged.","iss"),p=o(n.sub),p&&p.indexOf(i.sub)===-1&&f("Subject "+JSON.stringify(i.sub)+" in token is not valid - expected one of "+JSON.stringify(p)+".","sub"),p=o(n.aud);var d=o(i.aud)||[];p&&d.some(function(e){return p.indexOf(e)==-1})&&f("Audience list "+JSON.stringify(d)+" in token is not valid - some of following values are missing: "+JSON.stringify(p)+".","aud");var h=Date.now()/1e3;n.verifyAt&&(h=n.verifyAt);var m=n.gracePeriod||0;return"number"==typeof i.exp&&i.exp+m<h&&f("Token already expired at "+u(i.exp)+", current time is "+u(h)+".","exp"),"number"==typeof i.nbf&&h<i.nbf-m&&f("Token is not yet valid - it will become valid at "+u(i.nbf)+", current time is "+u(h)+". Check that your system time is correctly set.","nbf"),"number"==typeof i.iat&&h<i.iat-m&&f("Token seems to have been issued in the future - "+u(i.iat)+", current time is "+u(h)+". Check that your system time is correctly set.","iat"),n.jti&&i.jti!==n.jti&&f("Token ID "+JSON.stringify(i.jti)+" not valid - expected "+JSON.stringify(n.jti)+".","jti"),!0})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),o=r(i),u=function(e){var t=Object.assign({},e),n={loginWindow:null,closeCheckInterval:null};o.default.registerForCallback(this,n),this.finalize=function(e){this.destroy(),t.onResult&&t.onResult(e)}.bind(this);var r=function(){n.loginWindow&&n.loginWindow.closed&&this.finalize(!1)}.bind(this);this.render=function(){var e=this;if(!n.loginWindow){var i={width:599,height:600};i.left=(screen.availWidth-i.width)/2+screen.availLeft,i.top=(screen.availHeight-i.height)/2+screen.availTop,n.loginWindow=window.open(t.url,"_blank","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width="+i.width+",height="+i.height+",top="+i.top+",left="+i.left),n.loginWindow?n.closeCheckInterval=setInterval(r.bind(this),200):Promise.resolve().then(function(){return e.finalize(!1)})}},this.destroy=function(){n.loginWindow&&!n.loginWindow.closed&&n.loginWindow.close(),n.closeCheckInterval&&clearInterval(n.closeCheckInterval),this.destroy=function(){},o.default.unregisterForCallback(this)}};t.default=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new Function("try {return this===window;}catch(e){ return false;}")(),r=n?"interactive"===document.readyState||"complete"===document.readyState?Promise.resolve():new Promise(function(e){document.addEventListener("DOMContentLoaded",e,!1)}):Promise.resolve();t.default={domReady:r}},function(e,t){"use strict";function n(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)});return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(6),s=r(u),a=n(17),c=r(a),l=function(){function e(t){if(i(this,e),!(t&&t.serverUri&&t.clientId&&t.redirectUri))throw new Error("Os8Auth must be initialized with options containing serverUri, clientId and redirectUri.");this.options=t}return o(e,[{key:"grantExchangeToken",value:function(e){var t=e||{};if(!t.subject_token)throw new Error("Os8Auth.grantExchangeToken must be called with parameter subject_token.");var n=Object.assign({},t,{response_type:"id_token token",client_id:this.options.clientId,redirect_uri:this.options.redirectUri}),r=Object.keys(n).filter(function(e){return null!=n[e]}).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e]+"")}),i=this.options.serverUri.replace(/\/*$/,"/")+"exchangeOs8Token?"+r.join("&");return new Promise(function(e,t){new s.default({url:i,onResult:function(n){var r=c.default.getAuthResponseFromCallback(n);!r||r.error?t(r):e(r)}}).render()})}}]),e}();t.default=l},function(e,t){}])});
//# sourceMappingURL=uu_appg01.min.js.map